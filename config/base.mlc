class SerializedObject:serialized
{
	int _reference_counter = 1
	function int retain()
	{
		return ++_reference_counter;
	}
	function int release()
	{
		auto c = --_reference_counter;
		if( c == 0)
		{
			delete this;
		}
		return c;
	}
}

class commands/Command<SerializedObject>
{
	int id:key;
	function string getSerializedString():external:const;
}

class CommandSequence<Command>
{
	list<Command*> commands
}